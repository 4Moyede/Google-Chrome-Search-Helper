!function(e){var t=e(window),a=e("body"),l=(e("#wrapper"),e("#header")),n=e("#footer"),r=e("#main"),c=r.children("article");t.on("load",function(){window.setTimeout(function(){a.removeClass("is-preload")},100)});var i=l.children("nav"),o=i.find("li");o.length%2==0&&(i.addClass("use-middle"),o.eq(o.length/2).addClass("is-middle"));var h=325,d=!1;if(r._show=function(i,e){var o=c.filter("#"+i);if(0!=o.length){if(d||void 0!==e&&!0===e)return a.addClass("is-article-visible"),c.removeClass("active"),l.hide(),n.hide(),r.show(),o.show(),o.addClass("active"),void(d=!1);if(d=!0,a.hasClass("is-article-visible")){var s=c.filter(".active");s.removeClass("active"),setTimeout(function(){s.hide(),o.show(),setTimeout(function(){o.addClass("active"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){d=!1},h)},25)},h)}else a.addClass("is-article-visible"),setTimeout(function(){l.hide(),n.hide(),r.show(),o.show(),setTimeout(function(){o.addClass("active"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){d=!1},h)},25)},h)}},r._hide=function(i){var e=c.filter(".active");if(a.hasClass("is-article-visible")){if(void 0!==i&&!0===i&&history.pushState(null,null,"#"),d)return e.removeClass("active"),e.hide(),r.hide(),n.show(),l.show(),a.removeClass("is-article-visible"),d=!1,void t.scrollTop(0).triggerHandler("resize.flexbox-fix");d=!0,e.removeClass("active"),setTimeout(function(){e.hide(),r.hide(),n.show(),l.show(),setTimeout(function(){a.removeClass("is-article-visible"),t.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){d=!1},h)},25)},h)}},c.each(function(){var i=e(this);e('<div class="close">Close</div>').appendTo(i).on("click",function(){location.hash=""}),i.on("click",function(i){i.stopPropagation()})}),a.on("click",function(i){a.hasClass("is-article-visible")&&r._hide(!0)}),t.on("keyup",function(i){switch(i.keyCode){case 27:a.hasClass("is-article-visible")&&r._hide(!0)}}),t.on("hashchange",function(i){""==location.hash||"#"==location.hash?(i.preventDefault(),i.stopPropagation(),r._hide()):0<c.filter(location.hash).length&&(i.preventDefault(),i.stopPropagation(),r._show(location.hash.substr(1)))}),"scrollRestoration"in history)history.scrollRestoration="manual";else{var s=0,u=0,f=e("html,body");t.on("scroll",function(){s=u,u=f.scrollTop()}).on("hashchange",function(){t.scrollTop(s)})}r.hide(),c.hide(),""!=location.hash&&"#"!=location.hash&&t.on("load",function(){r._show(location.hash.substr(1),!0)})}(jQuery);